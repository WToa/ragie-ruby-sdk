# OpenapiClient::EntitiesApi

All URIs are relative to *https://api.ragie.ai*

| Method | HTTP request | Description |
| ------ | ------------ | ----------- |
| [**create_instruction**](EntitiesApi.md#create_instruction) | **POST** /instructions | Create Instruction |
| [**delete_instruction**](EntitiesApi.md#delete_instruction) | **DELETE** /instructions/{instruction_id} | Delete Instruction |
| [**list_entities_by_document**](EntitiesApi.md#list_entities_by_document) | **GET** /documents/{document_id}/entities | Get Document Extracted Entities |
| [**list_entities_by_instruction**](EntitiesApi.md#list_entities_by_instruction) | **GET** /instructions/{instruction_id}/entities | Get Instruction Extracted Entities |
| [**list_instructions**](EntitiesApi.md#list_instructions) | **GET** /instructions | List Instructions |
| [**update_instruction**](EntitiesApi.md#update_instruction) | **PUT** /instructions/{instruction_id} | Update Instruction |


## create_instruction

> <Instruction> create_instruction(create_instruction_params)

Create Instruction

Create a new instruction. Instructions are applied to documents as they are created or updated. The results of the instruction are stored as structured data in the schema defined by the `entity_schema` parameter. The `prompt` parameter is a natural language instruction which will be applied to documents. This feature is in beta and may change in the future.

### Examples

```ruby
require 'time'
require 'openapi_client'
# setup authorization
OpenapiClient.configure do |config|
  # Configure Bearer authorization: auth
  config.access_token = 'YOUR_BEARER_TOKEN'
end

api_instance = OpenapiClient::EntitiesApi.new
create_instruction_params = OpenapiClient::CreateInstructionParams.new({name: 'name_example', prompt: 'prompt_example', entity_schema: { key: 3.56}}) # CreateInstructionParams | 

begin
  # Create Instruction
  result = api_instance.create_instruction(create_instruction_params)
  p result
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->create_instruction: #{e}"
end
```

#### Using the create_instruction_with_http_info variant

This returns an Array which contains the response data, status code and headers.

> <Array(<Instruction>, Integer, Hash)> create_instruction_with_http_info(create_instruction_params)

```ruby
begin
  # Create Instruction
  data, status_code, headers = api_instance.create_instruction_with_http_info(create_instruction_params)
  p status_code # => 2xx
  p headers # => { ... }
  p data # => <Instruction>
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->create_instruction_with_http_info: #{e}"
end
```

### Parameters

| Name | Type | Description | Notes |
| ---- | ---- | ----------- | ----- |
| **create_instruction_params** | [**CreateInstructionParams**](CreateInstructionParams.md) |  |  |

### Return type

[**Instruction**](Instruction.md)

### Authorization

[auth](../README.md#auth)

### HTTP request headers

- **Content-Type**: application/json
- **Accept**: application/json


## delete_instruction

> Hash&lt;String, String&gt; delete_instruction(instruction_id)

Delete Instruction

Delete an instruction. This will delete the instruction and all entities generated by it. This operation is irreversible.

### Examples

```ruby
require 'time'
require 'openapi_client'
# setup authorization
OpenapiClient.configure do |config|
  # Configure Bearer authorization: auth
  config.access_token = 'YOUR_BEARER_TOKEN'
end

api_instance = OpenapiClient::EntitiesApi.new
instruction_id = '38400000-8cf0-11bd-b23e-10b96e4ef00d' # String | The ID of the instruction.

begin
  # Delete Instruction
  result = api_instance.delete_instruction(instruction_id)
  p result
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->delete_instruction: #{e}"
end
```

#### Using the delete_instruction_with_http_info variant

This returns an Array which contains the response data, status code and headers.

> <Array(Hash&lt;String, String&gt;, Integer, Hash)> delete_instruction_with_http_info(instruction_id)

```ruby
begin
  # Delete Instruction
  data, status_code, headers = api_instance.delete_instruction_with_http_info(instruction_id)
  p status_code # => 2xx
  p headers # => { ... }
  p data # => Hash&lt;String, String&gt;
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->delete_instruction_with_http_info: #{e}"
end
```

### Parameters

| Name | Type | Description | Notes |
| ---- | ---- | ----------- | ----- |
| **instruction_id** | **String** | The ID of the instruction. |  |

### Return type

**Hash&lt;String, String&gt;**

### Authorization

[auth](../README.md#auth)

### HTTP request headers

- **Content-Type**: Not defined
- **Accept**: application/json


## list_entities_by_document

> <EntityList> list_entities_by_document(document_id, opts)

Get Document Extracted Entities

### Examples

```ruby
require 'time'
require 'openapi_client'
# setup authorization
OpenapiClient.configure do |config|
  # Configure Bearer authorization: auth
  config.access_token = 'YOUR_BEARER_TOKEN'
end

api_instance = OpenapiClient::EntitiesApi.new
document_id = '38400000-8cf0-11bd-b23e-10b96e4ef00d' # String | The id of the document.
opts = {
  cursor: 'cursor_example', # String | An opaque cursor for pagination
  page_size: 56, # Integer | The number of items per page (must be greater than 0 and less than or equal to 100)
  partition: 'partition_example' # String | An optional partition to scope the request to. If omitted, accounts created after 1/9/2025 will have the request scoped to the default partition, while older accounts will have the request scoped to all partitions. Older accounts may opt in to strict partition scoping by contacting support@ragie.ai. Older accounts using the partitions feature are strongly recommended to scope the request to a partition.
}

begin
  # Get Document Extracted Entities
  result = api_instance.list_entities_by_document(document_id, opts)
  p result
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->list_entities_by_document: #{e}"
end
```

#### Using the list_entities_by_document_with_http_info variant

This returns an Array which contains the response data, status code and headers.

> <Array(<EntityList>, Integer, Hash)> list_entities_by_document_with_http_info(document_id, opts)

```ruby
begin
  # Get Document Extracted Entities
  data, status_code, headers = api_instance.list_entities_by_document_with_http_info(document_id, opts)
  p status_code # => 2xx
  p headers # => { ... }
  p data # => <EntityList>
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->list_entities_by_document_with_http_info: #{e}"
end
```

### Parameters

| Name | Type | Description | Notes |
| ---- | ---- | ----------- | ----- |
| **document_id** | **String** | The id of the document. |  |
| **cursor** | **String** | An opaque cursor for pagination | [optional] |
| **page_size** | **Integer** | The number of items per page (must be greater than 0 and less than or equal to 100) | [optional][default to 10] |
| **partition** | **String** | An optional partition to scope the request to. If omitted, accounts created after 1/9/2025 will have the request scoped to the default partition, while older accounts will have the request scoped to all partitions. Older accounts may opt in to strict partition scoping by contacting support@ragie.ai. Older accounts using the partitions feature are strongly recommended to scope the request to a partition. | [optional] |

### Return type

[**EntityList**](EntityList.md)

### Authorization

[auth](../README.md#auth)

### HTTP request headers

- **Content-Type**: Not defined
- **Accept**: application/json


## list_entities_by_instruction

> <EntityList> list_entities_by_instruction(instruction_id, opts)

Get Instruction Extracted Entities

### Examples

```ruby
require 'time'
require 'openapi_client'
# setup authorization
OpenapiClient.configure do |config|
  # Configure Bearer authorization: auth
  config.access_token = 'YOUR_BEARER_TOKEN'
end

api_instance = OpenapiClient::EntitiesApi.new
instruction_id = '38400000-8cf0-11bd-b23e-10b96e4ef00d' # String | The ID of the instruction.
opts = {
  cursor: 'cursor_example', # String | An opaque cursor for pagination
  page_size: 56, # Integer | The number of items per page (must be greater than 0 and less than or equal to 100)
  partition: 'partition_example' # String | An optional partition to scope the request to. If omitted, accounts created after 1/9/2025 will have the request scoped to the default partition, while older accounts will have the request scoped to all partitions. Older accounts may opt in to strict partition scoping by contacting support@ragie.ai. Older accounts using the partitions feature are strongly recommended to scope the request to a partition.
}

begin
  # Get Instruction Extracted Entities
  result = api_instance.list_entities_by_instruction(instruction_id, opts)
  p result
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->list_entities_by_instruction: #{e}"
end
```

#### Using the list_entities_by_instruction_with_http_info variant

This returns an Array which contains the response data, status code and headers.

> <Array(<EntityList>, Integer, Hash)> list_entities_by_instruction_with_http_info(instruction_id, opts)

```ruby
begin
  # Get Instruction Extracted Entities
  data, status_code, headers = api_instance.list_entities_by_instruction_with_http_info(instruction_id, opts)
  p status_code # => 2xx
  p headers # => { ... }
  p data # => <EntityList>
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->list_entities_by_instruction_with_http_info: #{e}"
end
```

### Parameters

| Name | Type | Description | Notes |
| ---- | ---- | ----------- | ----- |
| **instruction_id** | **String** | The ID of the instruction. |  |
| **cursor** | **String** | An opaque cursor for pagination | [optional] |
| **page_size** | **Integer** | The number of items per page (must be greater than 0 and less than or equal to 100) | [optional][default to 10] |
| **partition** | **String** | An optional partition to scope the request to. If omitted, accounts created after 1/9/2025 will have the request scoped to the default partition, while older accounts will have the request scoped to all partitions. Older accounts may opt in to strict partition scoping by contacting support@ragie.ai. Older accounts using the partitions feature are strongly recommended to scope the request to a partition. | [optional] |

### Return type

[**EntityList**](EntityList.md)

### Authorization

[auth](../README.md#auth)

### HTTP request headers

- **Content-Type**: Not defined
- **Accept**: application/json


## list_instructions

> <Array<Instruction>> list_instructions

List Instructions

List all instructions.

### Examples

```ruby
require 'time'
require 'openapi_client'
# setup authorization
OpenapiClient.configure do |config|
  # Configure Bearer authorization: auth
  config.access_token = 'YOUR_BEARER_TOKEN'
end

api_instance = OpenapiClient::EntitiesApi.new

begin
  # List Instructions
  result = api_instance.list_instructions
  p result
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->list_instructions: #{e}"
end
```

#### Using the list_instructions_with_http_info variant

This returns an Array which contains the response data, status code and headers.

> <Array(<Array<Instruction>>, Integer, Hash)> list_instructions_with_http_info

```ruby
begin
  # List Instructions
  data, status_code, headers = api_instance.list_instructions_with_http_info
  p status_code # => 2xx
  p headers # => { ... }
  p data # => <Array<Instruction>>
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->list_instructions_with_http_info: #{e}"
end
```

### Parameters

This endpoint does not need any parameter.

### Return type

[**Array&lt;Instruction&gt;**](Instruction.md)

### Authorization

[auth](../README.md#auth)

### HTTP request headers

- **Content-Type**: Not defined
- **Accept**: application/json


## update_instruction

> <Instruction> update_instruction(instruction_id, update_instruction_params)

Update Instruction

### Examples

```ruby
require 'time'
require 'openapi_client'
# setup authorization
OpenapiClient.configure do |config|
  # Configure Bearer authorization: auth
  config.access_token = 'YOUR_BEARER_TOKEN'
end

api_instance = OpenapiClient::EntitiesApi.new
instruction_id = '38400000-8cf0-11bd-b23e-10b96e4ef00d' # String | The ID of the instruction.
update_instruction_params = OpenapiClient::UpdateInstructionParams.new({active: false}) # UpdateInstructionParams | 

begin
  # Update Instruction
  result = api_instance.update_instruction(instruction_id, update_instruction_params)
  p result
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->update_instruction: #{e}"
end
```

#### Using the update_instruction_with_http_info variant

This returns an Array which contains the response data, status code and headers.

> <Array(<Instruction>, Integer, Hash)> update_instruction_with_http_info(instruction_id, update_instruction_params)

```ruby
begin
  # Update Instruction
  data, status_code, headers = api_instance.update_instruction_with_http_info(instruction_id, update_instruction_params)
  p status_code # => 2xx
  p headers # => { ... }
  p data # => <Instruction>
rescue OpenapiClient::ApiError => e
  puts "Error when calling EntitiesApi->update_instruction_with_http_info: #{e}"
end
```

### Parameters

| Name | Type | Description | Notes |
| ---- | ---- | ----------- | ----- |
| **instruction_id** | **String** | The ID of the instruction. |  |
| **update_instruction_params** | [**UpdateInstructionParams**](UpdateInstructionParams.md) |  |  |

### Return type

[**Instruction**](Instruction.md)

### Authorization

[auth](../README.md#auth)

### HTTP request headers

- **Content-Type**: application/json
- **Accept**: application/json

